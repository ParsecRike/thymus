<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:include="frags/head :: header">
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<script type="text/javascript">
	//<![CDATA[
	function beforeLoad() {
		var ps = location.search.substring(1).split('&');
		for (var i = 0; i < ps.length; i++) {
			var p = ps[i].split('=');
			if (p[0].toLowerCase() == 'page') {
				$('#fragContent').attr('th:include', p[1] + ' :: handleFrag()');
				$('#fragSrc').html(p[1]);
			}
		}
	}
	function handleFrag() {
		var h = this.handle;
		var d = h.data;
		if (h.fragSrc.error) {
			$('exampleSrc').html('Unavailable');
		} else {
			var js1 = '//cdn.jsdelivr.net/prism/0.1/prism.js';
			var css1 = '//cdn.jsdelivr.net/prism/0.1/prism.css';
			var sc = 0;
			function done(css) {
				if (css) {
					$('head').append('<style>' + css + '</style>');
				}
				if (++sc >= 2) {
					var $f = $('#fragContent');
					$f.css('display', 'none');
					var $c = $('<code class="language-markup">');
					var txt = $.trim(h.data);
					$c.text(txt);
					$f.append($c);
					Prism.highlightAll();
					$('.progress').css('display', 'none');
					$f.css('display', 'inherit');
				}
			}
			function fail(xhr, s, e) {
				$('#fragSrc').html('Unavailable: ' + ts + ': ' + e);
			}
			$.ajax({
				url : css1
			}).done(done).fail(fail);
			$.getScript(js1).done(function() {
				done();
				//$.getScript(js2).done(done).fail(fail);
			}).fail(fail);
		}
	}
	//]]>
</script>
<!-- thymus.js script -->
<script th:remove="all" src="../js/thymus.js" id="thymus"
	data-thx-base-path="../" data-thx-frag-extension=".htm"
	data-thx-head-frag="th:include=frags/head :: header"
	data-thx-onbeforefrags="beforeLoad()"></script>
</head>
<body>
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="navbar-header">
			<a class="navbar-brand" href="#">Fragment</a>
		</div>
	</nav>
	<div class="list-group">
		<div class="list-group-item">
			<h3 id="fragSrc">Source:</h3>
		</div>
		<div class="list-group-item">
			<div class="progress progress-striped active">
				<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="100"
					aria-valuemin="0" aria-valuemax="100" style="width: 100%">
					<span class="sr-only">Loading...</span>
				</div>
			</div>
			<div class="thymus-demo">
				<pre id="fragContent" style="display: none; word-break: normal; word-wrap: normal;"></pre>
			</div>
		</div>
	</div>
</body>
</html>